<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Server Setup | MSRebirth</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" type="image/png" href="/icon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="/icon-32x32.png" sizes="32x32">
    <link rel="shortcut icon" href="/icon.ico">
    <meta name="description" content="The rebirth of the Half-Life mod Master Sword Continued.">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.769ba8bf.css" as="style"><link rel="preload" href="/assets/js/app.09b92bfb.js" as="script"><link rel="preload" href="/assets/js/2.08c139a3.js" as="script"><link rel="preload" href="/assets/js/11.696e7bae.js" as="script"><link rel="prefetch" href="/assets/js/10.0c33545a.js"><link rel="prefetch" href="/assets/js/12.42d30209.js"><link rel="prefetch" href="/assets/js/13.576c9b7f.js"><link rel="prefetch" href="/assets/js/14.0952fa63.js"><link rel="prefetch" href="/assets/js/15.1c8f9490.js"><link rel="prefetch" href="/assets/js/16.7f59fa89.js"><link rel="prefetch" href="/assets/js/17.fccba11d.js"><link rel="prefetch" href="/assets/js/18.37b5f2c8.js"><link rel="prefetch" href="/assets/js/3.180c96a8.js"><link rel="prefetch" href="/assets/js/4.49141fc0.js"><link rel="prefetch" href="/assets/js/5.2759453d.js"><link rel="prefetch" href="/assets/js/6.0b76e480.js"><link rel="prefetch" href="/assets/js/7.a8e573c5.js"><link rel="prefetch" href="/assets/js/8.f4bad425.js"><link rel="prefetch" href="/assets/js/9.223a88b9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.769ba8bf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/icon.png" alt="MSRebirth" class="logo"> <span class="site-name can-hide">MSRebirth</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/project/intro.html" class="nav-link">
  Documentation
</a></div><div class="nav-item"><a href="https://discord.gg/nwJB9EhAN6" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/dev/game/intro.html" class="nav-link">
  Dev
</a></div> <a href="https://github.com/MSRevive" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/project/intro.html" class="nav-link">
  Documentation
</a></div><div class="nav-item"><a href="https://discord.gg/nwJB9EhAN6" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/dev/game/intro.html" class="nav-link">
  Dev
</a></div> <a href="https://github.com/MSRevive" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Information</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/project/intro.html" class="sidebar-link">Intro</a></li><li><a href="/project/about.html" class="sidebar-link">About</a></li><li><a href="/project/contributions.html" class="sidebar-link">Contributions</a></li><li><a href="/project/community.html" class="sidebar-link">Community Standard</a></li><li><a href="/project/special-thanks.html" class="sidebar-link">Special Thanks</a></li><li><a href="/project/maps.html" class="sidebar-link">Maps</a></li><li><a href="/project/fuzznet.html" class="sidebar-link">FuzzNet (FN)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guides</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guides/server-setup.html" aria-current="page" class="active sidebar-link">Server Setup</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guides/server-setup.html#rehlds" class="sidebar-link">ReHLDS</a></li><li class="sidebar-sub-header"><a href="/guides/server-setup.html#port-forwarding" class="sidebar-link">Port Forwarding</a></li><li class="sidebar-sub-header"><a href="/guides/server-setup.html#server-cfg" class="sidebar-link">Server.cfg</a></li><li class="sidebar-sub-header"><a href="/guides/server-setup.html#restarter-script" class="sidebar-link">Restarter script</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="server-setup"><a href="#server-setup" class="header-anchor">#</a> Server Setup</h3> <h2 id="rehlds"><a href="#rehlds" class="header-anchor">#</a> ReHLDS</h2> <p>Currently there is a build of ReHLDS packaged with the install for MS Rebirth, though this may change in the future, but if you're running a dedicated server from the install you play the game from, you're good to go, skip directly to port forwarding. If you want to separate these on your desktop, or set a server up on a dedicated host that you're not going to install Steam on, you'll need to use SteamCMD to install MS Rebirth. You can find instructions for installing SteamCMD on various operating systems on this page https://developer.valvesoftware.com/wiki/SteamCMD</p> <h1 id="steamcmd"><a href="#steamcmd" class="header-anchor">#</a> SteamCMD</h1> <p>Once you have SteamCMD setup, you'll want to use the command:</p> <ul><li>force_install_dir [directory]
before logging in to tell SteamCMD where you want to install MSR. Ordinarily you wouldn't have to login with your Steam account to download files, but MSR being in beta testing requires a full login for now.
As ReHDLS is currently packaged in, we can skip installing HLDS and go directly to the game files. Run the command:</li> <li>app_update 1961680
This is the Steam AppID for MS Rebirth. Should you want to install base HLDS for a different mod, instructions are on the SteamCMD page, but it's not recommended to run base HLDS at this time for Rebirth.
Run this command if you want to verify the install and overwrite any wonky files if it happens:</li> <li>app_update 1961680 validate</li></ul> <p>Since you don't have Steam to auto-update for you, you'll need to log in to SteamCMD and do the above whenever a patch for MSR is deployed. I suggest creating a batch script to save you a few seconds. If you're unfamiliar with the process, simply create a new text file in your SteamCMD directory, drop in this line:</p> <ul><li>steamcmd +force_install_dir [Your MSR install directory] +login [Username] [Password] +app_update 1961680 +quit
Then change the .txt file extension to .bat, and run it.
I'm lazy, so I create a shortcut to this file in my MSR install folder.</li></ul> <h2 id="port-forwarding"><a href="#port-forwarding" class="header-anchor">#</a> Port Forwarding</h2> <p>You'll need to forward these ports:</p> <ul><li>27015 UDP (game transmission, pings)</li> <li>27015 TCP (RCON)</li> <li>27020 UDP (HLTV transmission)?
Source: https://developer.valvesoftware.com/wiki/Half-Life_Dedicated_Server</li></ul> <p>The default server host port for pretty much all Valve games is 27015, but if you intend to run multiple servers, you may want to open a range of ports such as 27015-270XX, to give yourself some room.</p> <p>If you've never port forwarded before, you'll want to first figure out the brand and model name of your router, then track it down on https://portforward.com/ to find a guide tailored to your specific setup.</p> <h2 id="server-cfg"><a href="#server-cfg" class="header-anchor">#</a> Server.cfg</h2> <p>The server.cfg file can be found in msrebirth/msr/server.cfg, it should be mostly good to go by default, but you will at least need to scroll to the bottom to enable central server connection, and put in the address you were given when you were whitelisted as a host.
Commands you may want to look at:</p> <ul><li>hostname - You'll want to remove this if running multiple servers, as you'll have to define the hostname via launch parameters.</li> <li>rcon_password - This will allow you to login to the server and send admin commands in-game, worth setting just in case.</li> <li>msvote_map_enable - Turn this off if you want an &quot;immersive experience.&quot;</li> <li>ms_admin_contact - I dunno that anybody even knows this exists, but this will tell them who to whine to by typing &quot;contact&quot; in console</li> <li>ms_chatlog - <strong>Turn this on.</strong> It doesn't work at the moment, but it will.</li> <li>ms_timelimit - This will reset the server to Edana when it's empty for a period of time, though the default should be fine. (There's two of these in the default config, remove one of them. Dunno why.)</li> <li>ms_reset_if_empty - This will reboot the server whenever it resets to Edana via the timelimit. Stuff gets wonky when servers stay up too long, so this helps.</li></ul> <h1 id="commands-so-the-server-doesn-t-ban-everyone-constantly"><a href="#commands-so-the-server-doesn-t-ban-everyone-constantly" class="header-anchor">#</a> Commands so the server doesn't ban everyone constantly</h1> <p>ReHLDS has a built-in command spam filter that will auto-ban anybody sending too many commands to the server. Trouble is, Master Sword sends a lot of commands from the client to the server, so it is guaranteed to ban someone pretty quickly. Paste these at the bottom of your msr/server.cfg to prevent this:</p> <p>sv_rehlds_movecmdrate_max_avg 99999
sv_rehlds_movecmdrate_max_burst 99999
sv_rehlds_stringcmdrate_max_avg 99999
sv_rehlds_stringcmdrate_max_burst 9999
sv_rehlds_stringcmdrate_burst_punish -1
sv_rehlds_stringcmdrate_avg_punish -1
sv_rehlds_movecmdrate_burst_punish -1
sv_rehlds_movecmdrate_avg_punish -1</p> <h2 id="restarter-script"><a href="#restarter-script" class="header-anchor">#</a> Restarter script</h2> <p>You can launch ReHLDS using the executable, but launching via command line will allow you to set additional parameters. Greatguys has made a very useful <a href="https://github.com/MSRevive/website/files/10714271/Restarter.zip" target="_blank" rel="noopener noreferrer">Restarter batch file<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> which includes the launch command along with a few default parameters you will want for MSR, just drop this script into the base msrebirth folder, where the hlds.exe is located. It will launch an instance of ReHLDS and attempt to bind to it, rebooting it whenever it disappears/crashes, and it will crash.
Depending on your setup or how many servers you want to run, you may need a few additional parameters:</p> <ul><li>+hostname [Name] - Use this if you're running more than one server, and remove it from your server.cfg, else all servers will use that instead.</li> <li>+ip [LAN IP] - Use this if you need to force HLDS to bind to a specific IP on your network.</li> <li>-port - The default port is 27015, but if you want to run multiple servers or you just don't like 27015 for some reason, you'll need to specify with this.</li></ul> <p>To run multiple servers, you can simply create a copy of the restarter script, make the hostname changes in server.cfg and this script, and specify your port, and it will run cleanly off of a single install of MSR. By default, MSR will generate a crashed.cfg file in its directory whenever the server changes maps, which is executed as a launch parameter in the restarter script to boot the server back up on that map in case of a crash. Next patch will bring the ability to specify the name of the crashed.cfg for running multiple servers, and I will add those commands to this list when they are released.</p> <p>Note: if running multiple servers, don't launch all the batch files at once, as one restarter will bind to all of the servers and it will not reboot until they all crash.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/MSRevive/website/edit/master/guides/server-setup.md" target="_blank" rel="noopener noreferrer">Help us improve this page.</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/12/2023, 12:19:58 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/project/fuzznet.html" class="prev">
        FuzzNet (FN)
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.09b92bfb.js" defer></script><script src="/assets/js/2.08c139a3.js" defer></script><script src="/assets/js/11.696e7bae.js" defer></script>
  </body>
</html>
